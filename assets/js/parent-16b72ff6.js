import{b as I,u as P,e as v,S as x,_ as B}from"./index-44fff2cd.js";import{d as g,aN as E,_ as D,j as u,G as O,n as _,i as S,Z as b,e as M,ag as U,o as f,c as j,V as a,P as l,X as d,u as i,O as w,Q as R,W as y,R as G,ay as Q}from"./@vue-46b49e78.js";import{u as W,b as X}from"./vue-router-38d1e73f.js";import{s as V}from"./pinia-f5f9267e.js";import"./vue-i18n-d37bc68d.js";import"./@intlify-9e8a497c.js";import"./source-map-7d7e1c08.js";import"./vue-efe7a2be.js";import"./js-cookie-cf83ad76.js";import"./@element-plus-5404d42b.js";import"./nprogress-8d2808ea.js";import"./axios-a342f982.js";import"./qs-bbfcbdf3.js";import"./side-channel-eafc5c70.js";import"./get-intrinsic-b9397c9a.js";import"./has-symbols-e8f3ca0e.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-9ceb8f5b.js";import"./object-inspect-7b08a46e.js";import"./element-plus-2d1d410d.js";import"./lodash-es-2e98bc53.js";import"./@vueuse-5cf8638e.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-6aac7dfa.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-b6f35736.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-20080f74.js";import"./moment-a9aaa855.js";import"./vue-demi-71ba0ef2.js";const Z={class:"layout-parent"},q=g({name:"layoutParentView"}),Ce=g({...q,setup(z){const K=E(()=>B(()=>import("./iframes-17959e1b.js"),["assets/js/iframes-17959e1b.js","assets/js/@vue-46b49e78.js","assets/js/vue-router-38d1e73f.js"])),s=W(),A=X(),L=I(),N=P(),{keepAliveNames:m,cachedViews:c}=V(L),{themeConfig:n}=V(N),e=D({refreshRouterViewKey:"",iframeRefreshKey:"",keepAliveNameList:[],iframeList:[]}),p=u(()=>n.value.animation),T=u(()=>n.value.isTagsview?c.value:e.keepAliveNameList),h=u(()=>s.meta.isIframe),k=async()=>{A.getRoutes().forEach(t=>{t.meta.isIframe&&(t.meta.isIframeOpen=!1,t.meta.loading=!0,e.iframeList.push({...t}))})};return O(()=>{e.keepAliveNameList=m.value,v.on("onTagsViewRefreshRouterView",t=>{e.keepAliveNameList=m.value.filter(o=>s.name!==o),e.refreshRouterViewKey="",e.iframeRefreshKey="",_(()=>{e.refreshRouterViewKey=t,e.iframeRefreshKey=t,e.keepAliveNameList=m.value})})}),S(()=>{k(),_(()=>{setTimeout(()=>{if(n.value.isCacheTagsView){let t=x.get("tagsViewList")||[];c.value=t.filter(o=>{var r;return(r=o.meta)==null?void 0:r.isKeepAlive}).map(o=>o.name)}},0)})}),b(()=>{v.off("onTagsViewRefreshRouterView",()=>{})}),M(()=>s.fullPath,()=>{e.refreshRouterViewKey=decodeURI(s.fullPath)},{immediate:!0}),(t,o)=>{const r=U("router-view");return f(),j("div",Z,[a(r,null,{default:l(({Component:C})=>[a(d,{name:i(p),mode:"out-in"},{default:l(()=>[(f(),w(Q,{include:i(T)},[R((f(),w(G(C),{key:e.refreshRouterViewKey,class:"w100"})),[[y,!i(h)]])],1032,["include"]))]),_:2},1032,["name"])]),_:1}),a(d,{name:i(p),mode:"out-in"},{default:l(()=>[R(a(i(K),{class:"w100",refreshKey:e.iframeRefreshKey,name:i(p),list:e.iframeList},null,8,["refreshKey","name","list"]),[[y,i(h)]])]),_:1},8,["name"])])}}});export{Ce as default};
