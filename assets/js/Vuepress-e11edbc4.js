import{d as te,_ as x,b as L,i as le,ag as u,ap as ae,o as _,c as N,V as t,P as o,a as c,S as M,T as p,u as b,Q as oe,O as P,a3 as C,F as ne,a8 as se,bb as re,b9 as ie}from"./@vue-46b49e78.js";import{R as de,S as ue,B as ce,P as pe}from"./@element-plus-5404d42b.js";import R from"./TagList-0b89a7b1.js";import{J as me}from"./jszip-dba9266b.js";import{h as fe}from"./moment-a9aaa855.js";import{_ as _e}from"./_plugin-vue_export-helper-c27b6911.js";import{a as v}from"./element-plus-2d1d410d.js";import"./@intlify-9e8a497c.js";import"./source-map-7d7e1c08.js";import"./lodash-es-2e98bc53.js";import"./@vueuse-5cf8638e.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-6aac7dfa.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-b6f35736.js";const ge=[{value:"大前端"},{value:"Vue"},{value:"ORM"},{value:"MyBatisPlus"},{value:"MyBatis"}],he=[{value:"大前端"},{value:"Vue"},{value:"Docker"},{value:"ORM"},{value:"MyBatisPlus"},{value:"MyBatis"}];const S=y=>(re("data-v-534a9537"),y=y(),ie(),y),ve={class:"common-layout"},ye=S(()=>c("h2",null,[p("Vuepress 文档辅助工具 "),c("span",{style:{color:"#9b9696","font-size":"14px","font-weight":"500",display:"inline-block","margin-left":"15px"}},[c("span",{style:{"font-size":"18px",display:"inline-block","margin-right":"3px"}},"V"),p("2.0.1")])],-1)),ke={style:{width:"900px",margin:"50px auto"}};const Ve={class:"card-header",style:{display:"flex","justify-content":"space-between","align-items":"center"}},be={"element-loading-text":"下载中,请稍候...","element-loading-spinner":"el-icon-loading"},Pe={style:{"min-height":"500px"}},we={style:{height:"40px",display:"flex","justify-content":"space-between"}},xe={style:{"margin-top":"auto","margin-bottom":"auto"}},Ne=S(()=>c("span",null,"生成README.md",-1)),Ce=S(()=>c("div",{style:{width:"900px",margin:"0 auto",display:"flex","justify-content":"space-between",color:"#9b9696"}},[c("div",{class:"grid-content"},"自用偷懒小工具"),c("div",{class:"grid-content"},"Powered By 李广妮")],-1)),Se={class:"dialog-footer"},Fe=te({name:"VuepressCodeTool"}),Ee=Object.assign(Fe,{setup(y){const e=x({inputValue:localStorage.getItem("vuepress_path")||"",vuepressPath:localStorage.getItem("vuepress_path")||"",targetPath:localStorage.getItem("vuepress_targetPath")||"",mdFiles:[],createReadme:!1,catogries:JSON.parse(localStorage.getItem("vuepress_catagories")||"[]"),tags:JSON.parse(localStorage.getItem("vuepress_tags")||"[]"),foldName:"",foldOrder:0,permLinkPre:""}),O=x(he),U=x(ge),g=L(!1),k=L(!1);le(()=>{e.targetPath==""?g.value=!0:(F(),V())});const F=function(l){l&&(e.vuepressPath=l.substring(0,l.indexOf("\\src\\")+4));let n=e.targetPath.replace(e.vuepressPath,"").split("\\").filter(d=>d&&d!=""),r=n[n.length-1];e.foldName=J(n[n.length-1]),e.foldName!==r&&(e.foldOrder=r.replace(e.foldName,"").replace(".","")),e.permLinkPre=n.reduce(function(d,i){return/^[0-9]+[\.]/.test(i)?d+"/"+i.substring(0,i.indexOf(".")):d+"/"+i},"")},D=function(){if(e.targetPath===""||e.vuepressPath==="")return v.error("路径不能为空!");if(e.targetPath==e.vuepressPath)return v.error("路径不能相同!");if(e.targetPath.indexOf(e.vuepressPath)<0)return v.error("目标文件夹路径必须在Vuepress项目路径下");localStorage.setItem("vuepress_path",e.vuepressPath),localStorage.setItem("vuepress_targetPath",e.targetPath),localStorage.setItem("vuepress_tags",JSON.stringify(e.tags)),localStorage.setItem("vuepress_catagories",JSON.stringify(e.catogries)),g.value=!1},V=function(){let l=(e.mdFiles.length-(e.createReadme?1:0)+1)*10;l=10,e.mdFiles.length!=0&&(l=Number(e.mdFiles[e.mdFiles.length-1].key)+10),e.mdFiles.push(B(l))},I=function(l,a){e.mdFiles.splice(a,1)},B=function(l="",a="",n=!1){let r=e.permLinkPre+"/"+l+"-"+Date.now()+".html";return r="{permLinkPre}/{key}-"+Date.now()+".html",{key:l,title:a,isReadMeFile:n,permalink:r}},T=async function(){k.value=!0;try{try{await Y()}catch(n){v.warning(n);return}var l=new me;e.createReadme&&l.file("README.md",A()),e.mdFiles.forEach(n=>{if(n.title!==""){if(n.isReadMeFile)n.fileName="README.md";else{n.fileName=n.key+"."+n.title+".md";let r=n.permalink||"";n.hasOwnProperty("permalink")||(r=e.permLinkPre+"/{key}/"+Date.now()+".html"),n.permalink=r.replace("{key}",n.key).replace("{permLinkPre}",e.permLinkPre)}l.file(n.fileName,j(n))}});const a=e.foldName;l.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}}).then(function(n){var r="vuepress-files-"+a+".zip",d=document.createElement("a");d.download=r,d.style.display="none",d.href=URL.createObjectURL(n),document.body.appendChild(d),d.click(),document.body.removeChild(d)})}catch(a){v.error("下载文件出错:"+a)}finally{k.value=!1}},j=function(l){let a="";return a+=`---
`,a+="title: '"+l.title+`'
`,a+="order: "+l.key+`
`,a+="date: "+fe().format("YYYY-MM-DD")+`
`,a+="permalink: '"+l.permalink+`'
`,e.catogries.length>0&&(a+=`category:
`,e.catogries.forEach(n=>{a+="   - "+n+`
`})),e.tags.length>0&&(a+=`tag:
`,e.tags.forEach(n=>{a+="   - "+n+`
`})),a+=`---

`,a+="# "+l.title,a+=`
`,a},A=function(){let l="";return l+=`---
`,l+=`dir: {
`,l+="    text: '"+e.foldName+`',
`,l+="    order: "+e.foldOrder+`,
`,l+="    link: "+!1+`
`,l+=`}
`,l+=`index: false
`,l+=`---
`,l},J=function(l){return l.replace(/[0-9]{1,}[\.]{1}/,"")},Y=async function(){e.mdFiles.forEach(l=>{if(l.title=="")throw new Error("文件名不能为空")})},$=function(l){e.tags=l},z=function(l){e.catogries=l},Q=()=>{g.value=!0};return(l,a)=>{const n=u("el-header"),r=u("el-button"),d=u("el-icon"),i=u("el-input"),m=u("el-col"),E=u("el-row"),Z=u("el-switch"),q=u("el-card"),G=u("el-main"),H=u("el-footer"),K=u("el-container"),f=u("el-form-item"),W=u("el-form"),X=u("el-dialog"),ee=ae("loading");return _(),N("div",ve,[t(K,null,{default:o(()=>[t(n,null,{default:o(()=>[ye]),_:1}),t(G,null,{default:o(()=>[c("div",ke,[M("",!0),t(q,{class:"box-card"},{header:o(()=>[c("div",Ve,[c("span",null,[p("文件列表"),t(d,{onClick:Q,style:{display:"inline-block","margin-left":"10px",color:"#409eff"}},{default:o(()=>[t(b(de))]),_:1})]),t(r,{type:"primary",link:"",onClick:V},{default:o(()=>[p("新增一行")]),_:1})])]),footer:o(()=>[c("div",we,[c("div",xe,[Ne,t(Z,{modelValue:e.createReadme,"onUpdate:modelValue":a[0]||(a[0]=s=>e.createReadme=s),style:{"margin-left":"15px"}},null,8,["modelValue"])]),t(r,{type:"primary",onClick:T,loading:k.value,icon:b(ue)},{default:o(()=>[p("下载文件")]),_:1},8,["loading","icon"])])]),default:o(()=>[oe((_(),N("div",be,[c("div",Pe,[e.createReadme?(_(),P(E,{key:0,gutter:20,type:"flex",justify:"center"},{default:o(()=>[t(m,{span:2},{default:o(()=>[t(i,{disabled:!0,value:"-"})]),_:1}),t(m,{span:12},{default:o(()=>[t(i,{placeholder:"请输入文件名称",disabled:!0,value:"README"},{append:o(()=>[p(".md")]),_:1})]),_:1}),t(m,{span:8},{default:o(()=>[t(i,{disabled:!0,value:"-"})]),_:1}),t(m,{span:2},{default:o(()=>[t(r,{icon:"el-icon-plus",onClick:C(V,["prevent"])},null,8,["onClick"])]),_:1})]),_:1})):M("",!0),(_(!0),N(ne,null,se(e.mdFiles,(s,w)=>(_(),P(E,{gutter:20,key:w,type:"flex",justify:"center"},{default:o(()=>[t(m,{span:2},{default:o(()=>[t(i,{modelValue:s.key,"onUpdate:modelValue":h=>s.key=h},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(m,{span:12},{default:o(()=>[t(i,{placeholder:"请输入文件名称",modelValue:s.title,"onUpdate:modelValue":h=>s.title=h},{append:o(()=>[p(".md")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(m,{span:8},{default:o(()=>[t(i,{modelValue:s.permalink,"onUpdate:modelValue":h=>s.permalink=h},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(m,{span:2},{default:o(()=>[!e.createReadme&&w===0?(_(),P(r,{key:0,icon:b(ce),onClick:C(V,["prevent"])},null,8,["icon","onClick"])):(_(),P(r,{key:1,icon:b(pe),onClick:C(h=>I(s,w),["prevent"])},null,8,["icon","onClick"]))]),_:2},1024)]),_:2},1024))),128))])])),[[ee,k.value]])]),_:1})])]),_:1}),t(H,null,{default:o(()=>[Ce]),_:1})]),_:1}),t(X,{modelValue:g.value,"onUpdate:modelValue":a[7]||(a[7]=s=>g.value=s),title:"设置",width:"700",center:""},{footer:o(()=>[c("div",Se,[t(r,{onClick:a[6]||(a[6]=s=>g.value=!1)},{default:o(()=>[p("取 消")]),_:1}),t(r,{type:"primary",onClick:D},{default:o(()=>[p("确 定")]),_:1})])]),default:o(()=>[t(W,{ref:"settingForm",model:e,"label-width":"90px","label-position":"left"},{default:o(()=>[t(f,{label:"目标路径"},{default:o(()=>[t(i,{modelValue:e.targetPath,"onUpdate:modelValue":a[1]||(a[1]=s=>e.targetPath=s),onInput:F},null,8,["modelValue"])]),_:1}),t(f,{label:"文档根路径"},{default:o(()=>[t(i,{modelValue:e.vuepressPath,"onUpdate:modelValue":a[2]||(a[2]=s=>e.vuepressPath=s)},null,8,["modelValue"])]),_:1}),t(f,{label:"文件夹名称"},{default:o(()=>[t(i,{modelValue:e.foldName,"onUpdate:modelValue":a[3]||(a[3]=s=>e.foldName=s),placholder:"请输入文件夹名称"},null,8,["modelValue"])]),_:1}),t(f,{label:"文件夹排序"},{default:o(()=>[t(i,{modelValue:e.foldOrder,"onUpdate:modelValue":a[4]||(a[4]=s=>e.foldOrder=s),placholder:"请输入文件夹排序数字"},null,8,["modelValue"])]),_:1}),t(f,{label:"链接前缀"},{default:o(()=>[t(i,{modelValue:e.permLinkPre,"onUpdate:modelValue":a[5]||(a[5]=s=>e.permLinkPre=s)},null,8,["modelValue"])]),_:1}),t(f,{label:"分类"},{default:o(()=>[t(R,{"selected-tags":e.catogries,"def-tags":O,onUpdate:z},null,8,["selected-tags","def-tags"])]),_:1}),t(f,{label:"标签"},{default:o(()=>[t(R,{"selected-tags":e.tags,"def-tags":U,onUpdate:$},null,8,["selected-tags","def-tags"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),Ge=_e(Ee,[["__scopeId","data-v-534a9537"]]);export{Ge as default};
